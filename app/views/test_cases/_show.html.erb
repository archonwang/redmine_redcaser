<div class="case-preview issue">
  <div class="subject">
    <%= render_issue_subject_with_tree(@test_case.issue) %>
  </div>

  <div class="attributes">
  </div>

  <%= render :partial => 'issues/test_case_data_fields', :locals => { :issue => @test_case.issue} %>

</div>

<div class="tabs">
<ul>
  <li>
    <%= link_to(l(:label_execution_history), "#", :class => "selected", :id => "tab-history", :onclick => "showTab('history', ''); this.blur(); return false;") %>
  </li>
  <% if @relations.present? %>
  <li>
    <%= link_to(l(:label_related_issues), "#", :class => "",  :id => "tab-relations", :onclick => "showTab('relations', ''); this.blur(); return false;") %>
  </li>
  <% end %>
</ul>
</div>

<div id="tab-content-history" class="tab-content">
  <% if @journals.present? %>
    <% for journal in @journals %>
    <div class="journal-<%= journal.id %>">
      <h4>
        <%= avatar(journal.executor, :size => "24") %>
        <%= authoring journal.created_on, journal.executor, :label => :label_updated_time_by %>
      </h4>
      <ul class="details"><li><strong>Status</strong> changed to <span class="status"><%= journal.result.name.to_s %></span></li></ul>
      <div class="wiki">
        <%= textilizable(journal, :comment) %>
      </div>
    </div>
    <% end %>
  <% end %>

  <%= text_area_tag :comment, '', :class => 'wiki-edit case-footer-comment', :cols => 60, :rows => 5, :maxlength => 1024 %>
  <%= select_tag :execution_status,  options_for_select(@test_case_statuses, @test_case_result), :class => 'case-footer-select'%>
  <%= submit_tag l(:button_submit), :class => 'case-footer-submit', :data => { id: @test_case } %>
</div>

<% if @relations.present? %>
<div id="tab-content-relations" style="display: none" class="tab-content">
  <%= render_issue_relations(@test_case.issue, @relations) %>
</div>

<% end %>
